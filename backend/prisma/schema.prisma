// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Venue {
  id             Int    @id @map("venue_id")
  name           String @map("venue_name")
  homeMultiplier Float  @map("home_multiplier")
  team           Team?  @relation("TeamVenue")
  games          Game[] @relation("VenueGames")

  @@map("venue")
}

model Team {
  id          Int          @id @map("team_id")
  name        String       @unique
  venueId     Int          @unique
  venue       Venue        @relation("TeamVenue", fields: [venueId], references: [id])
  simulations Simulation[] @relation("TeamSimulations")
  homeGames   Game[]       @relation("HomeGames")
  awayGames   Game[]       @relation("AwayGames")

  @@map("team")
}

model Simulation {
  id            Int  @id @default(autoincrement())
  simulationRun Int  @map("simulation_run")
  results       Int
  teamId        Int
  team          Team @relation("TeamSimulations", fields: [teamId], references: [id])

  @@map("simulation")
}

model Game {
  id         Int      @id @default(autoincrement())
  date       DateTime
  homeTeamId Int
  awayTeamId Int
  venueId    Int
  homeTeam   Team     @relation("HomeGames", fields: [homeTeamId], references: [id])
  awayTeam   Team     @relation("AwayGames", fields: [awayTeamId], references: [id])
  venue      Venue    @relation("VenueGames", fields: [venueId], references: [id])

  @@map("game")
}
